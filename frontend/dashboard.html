<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ | Dashboard - UAE Schools Competition</title>

    <!-- Apply language BEFORE page renders (prevents flash) -->
    <script>
        (function() {
            var savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang === 'ar') {
                document.documentElement.setAttribute('lang', 'ar');
                document.documentElement.setAttribute('dir', 'rtl');
                // Enable RTL CSS after DOM loads
                document.addEventListener('DOMContentLoaded', function() {
                    var rtlCSS = document.getElementById('bootstrap-rtl');
                    if (rtlCSS) rtlCSS.disabled = false;
                });
            } else {
                document.documentElement.setAttribute('lang', 'en');
                document.documentElement.setAttribute('dir', 'ltr');
            }
        })();
    </script>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap RTL CSS (for Arabic) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" id="bootstrap-rtl" disabled>
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Google Fonts - Arabic Support -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="dashboard.html">
                <i class="bi bi-mortarboard-fill fs-3 text-primary me-2"></i>
                <span class="fw-bold" data-en="UAE Schools Competition" data-ar="ŸÖÿ≥ÿßÿ®ŸÇÿ© ÿßŸÑŸÖÿØÿßÿ±ÿ≥ ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©">UAE Schools Competition</span>
            </a>
            
            <div class="d-flex align-items-center gap-2">
                <!-- Language Toggle Button -->
                <button class="btn btn-outline-primary btn-sm" id="languageToggle" onclick="toggleLanguage()">
                    <i class="bi bi-translate"></i>
                    <span id="langText">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                </button>
                
                <!-- Logout Button -->
                <button class="btn btn-outline-danger btn-sm" onclick="logout()">
                    <i class="bi bi-box-arrow-right"></i>
                    <span data-en="Logout" data-ar="ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨">Logout</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
        
        <!-- Welcome Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-lg rounded-4 welcome-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; overflow: hidden;">
                    <div class="welcome-pattern"></div>
                    <div class="card-body p-4 p-md-5 text-white position-relative">
                        <div class="d-flex justify-content-between align-items-center flex-wrap">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="welcome-avatar me-3">
                                        <i class="bi bi-person-circle"></i>
                                    </div>
                                    <div>
                                        <h2 class="mb-1 fw-bold">
                                            <span data-en="Welcome back," data-ar="ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉÿå">Welcome back,</span>
                                            <span id="userFullName" class="fw-bold">Student</span>! üëã
                                        </h2>
                                        <p class="mb-0 opacity-90 d-flex align-items-center">
                                            <i class="bi bi-mortarboard me-2"></i>
                                            <span id="userInfo">Grade ‚Ä¢ School</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3 mt-md-0">
                                <div class="score-circle mb-2">
                                    <div class="display-4 fw-bold" id="totalScore">0%</div>
                                </div>
                                <small class="opacity-90" data-en="Overall Score" data-ar="ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä">Overall Score</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="row g-4 mb-4">
            <!-- Overall Rank -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100 stat-card stat-card-gold">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon-wrapper mb-3">
                            <div class="stat-icon-bg stat-icon-bg-gold">
                                <i class="bi bi-trophy-fill"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold mb-1" id="overallRank">--</h3>
                        <p class="text-muted mb-0 small" data-en="Overall Rank" data-ar="ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿπÿßŸÖ">Overall Rank</p>
                    </div>
                </div>
            </div>

            <!-- Grade Rank -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100 stat-card stat-card-green">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon-wrapper mb-3">
                            <div class="stat-icon-bg stat-icon-bg-green">
                                <i class="bi bi-star-fill"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold mb-1" id="gradeRank">--</h3>
                        <p class="text-muted mb-0 small" data-en="Grade Rank" data-ar="ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿµŸÅ">Grade Rank</p>
                    </div>
                </div>
            </div>

            <!-- School Rank -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100 stat-card stat-card-blue">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon-wrapper mb-3">
                            <div class="stat-icon-bg stat-icon-bg-blue">
                                <i class="bi bi-building"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold mb-1" id="schoolRank">--</h3>
                        <p class="text-muted mb-0 small" data-en="School Rank" data-ar="ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©">School Rank</p>
                    </div>
                </div>
            </div>

            <!-- Total Attempts -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100 stat-card stat-card-purple">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon-wrapper mb-3">
                            <div class="stat-icon-bg stat-icon-bg-purple">
                                <i class="bi bi-clipboard-check-fill"></i>
                            </div>
                        </div>
                        <h3 class="fw-bold mb-1" id="totalAttempts">0</h3>
                        <p class="text-muted mb-0 small" data-en="Total Attempts" data-ar="ÿπÿØÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™">Total Attempts</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Stars Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm bg-warning bg-opacity-10">
                    <div class="card-body text-center p-4">
                        <div class="d-flex align-items-center justify-content-center gap-3">
                            <div class="display-1">‚≠ê</div>
                            <div>
                                <h2 class="fw-bold mb-0 text-warning" id="totalStars">0</h2>
                                <p class="text-muted mb-0" data-en="Total Stars Earned" data-ar="ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÜÿ¨ŸàŸÖ ÿßŸÑŸÖŸÉÿ™ÿ≥ÿ®ÿ©">Total Stars Earned</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subjects Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex align-items-center justify-content-between flex-wrap mb-4">
                    <h3 class="fw-bold mb-0">
                        <i class="bi bi-book-fill text-primary me-2"></i>
                        <span data-en="Subjects" data-ar="ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©">Subjects</span>
                    </h3>
                    <small class="text-muted">
                        <i class="bi bi-info-circle me-1"></i>
                        <span data-en="Click on any subject to start a quiz" data-ar="ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿ£Ÿä ŸÖÿßÿØÿ© ŸÑÿ®ÿØÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±">Click on any subject to start a quiz</span>
                    </small>
                </div>
            </div>
        </div>

        <!-- Subject Cards -->
        <div class="row g-4 mb-5">
            
            <!-- Mathematics -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm subject-card h-100 subject-card-math" onclick="startQuiz('math')" style="cursor: pointer;">
                    <div class="card-body text-center p-4 position-relative">
                        <div class="subject-badge subject-badge-primary">#1</div>
                        <div class="subject-icon-wrapper mb-3">
                            <div class="subject-icon-circle subject-icon-primary">
                                <i class="bi bi-calculator-fill"></i>
                            </div>
                        </div>
                        <h5 class="fw-bold mb-3" data-en="Mathematics" data-ar="ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿßÿ™">Mathematics</h5>
                        
                        <div class="score-display mb-3">
                            <div class="display-5 fw-bold text-primary mb-1" id="mathScore">0/10</div>
                            <small class="text-muted" data-en="Best Score" data-ar="ÿ£ŸÅÿ∂ŸÑ ŸÜÿ™Ÿäÿ¨ÿ©">Best Score</small>
                        </div>
                        
                        <div class="mb-3">
                            <div class="progress progress-modern" style="height: 12px; border-radius: 10px; background-color: #e9ecef;">
                                <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated" id="mathProgress" role="progressbar" style="width: 0%; border-radius: 10px;"></div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                            <small class="text-muted">
                                <i class="bi bi-arrow-repeat me-1"></i>
                                <span data-en="Attempts:" data-ar="ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:">Attempts:</span>
                                <strong id="mathAttempts">0</strong>
                            </small>
                            <small class="text-warning fw-bold" id="mathStars">0 ‚≠ê</small>
                        </div>

                        <button class="btn btn-primary w-100 fw-semibold btn-quiz" onclick="event.stopPropagation(); startQuiz('math');">
                            <i class="bi bi-play-fill me-2"></i>
                            <span data-en="Start Quiz" data-ar="ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±">Start Quiz</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Science -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm subject-card h-100 subject-card-science" onclick="startQuiz('science')" style="cursor: pointer;">
                    <div class="card-body text-center p-4 position-relative">
                        <div class="subject-badge subject-badge-success">#2</div>
                        <div class="subject-icon-wrapper mb-3">
                            <div class="subject-icon-circle subject-icon-success">
                                <i class="bi bi-brightness-high-fill"></i>
                            </div>
                        </div>
                        <h5 class="fw-bold mb-3" data-en="Science" data-ar="ÿßŸÑÿπŸÑŸàŸÖ">Science</h5>
                        
                        <div class="score-display mb-3">
                            <div class="display-5 fw-bold text-success mb-1" id="scienceScore">0/10</div>
                            <small class="text-muted" data-en="Best Score" data-ar="ÿ£ŸÅÿ∂ŸÑ ŸÜÿ™Ÿäÿ¨ÿ©">Best Score</small>
                        </div>
                        
                        <div class="mb-3">
                            <div class="progress progress-modern" style="height: 12px; border-radius: 10px; background-color: #e9ecef;">
                                <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" id="scienceProgress" role="progressbar" style="width: 0%; border-radius: 10px;"></div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                            <small class="text-muted">
                                <i class="bi bi-arrow-repeat me-1"></i>
                                <span data-en="Attempts:" data-ar="ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:">Attempts:</span>
                                <strong id="scienceAttempts">0</strong>
                            </small>
                            <small class="text-warning fw-bold" id="scienceStars">0 ‚≠ê</small>
                        </div>

                        <button class="btn btn-success w-100 fw-semibold btn-quiz" onclick="event.stopPropagation(); startQuiz('science');">
                            <i class="bi bi-play-fill me-2"></i>
                            <span data-en="Start Quiz" data-ar="ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±">Start Quiz</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- English -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm subject-card h-100 subject-card-english" onclick="startQuiz('english')" style="cursor: pointer;">
                    <div class="card-body text-center p-4 position-relative">
                        <div class="subject-badge subject-badge-danger">#3</div>
                        <div class="subject-icon-wrapper mb-3">
                            <div class="subject-icon-circle subject-icon-danger">
                                <i class="bi bi-translate"></i>
                            </div>
                        </div>
                        <h5 class="fw-bold mb-3" data-en="English" data-ar="ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©">English</h5>
                        
                        <div class="score-display mb-3">
                            <div class="display-5 fw-bold text-danger mb-1" id="englishScore">0/10</div>
                            <small class="text-muted" data-en="Best Score" data-ar="ÿ£ŸÅÿ∂ŸÑ ŸÜÿ™Ÿäÿ¨ÿ©">Best Score</small>
                        </div>
                        
                        <div class="mb-3">
                            <div class="progress progress-modern" style="height: 12px; border-radius: 10px; background-color: #e9ecef;">
                                <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated" id="englishProgress" role="progressbar" style="width: 0%; border-radius: 10px;"></div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                            <small class="text-muted">
                                <i class="bi bi-arrow-repeat me-1"></i>
                                <span data-en="Attempts:" data-ar="ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:">Attempts:</span>
                                <strong id="englishAttempts">0</strong>
                            </small>
                            <small class="text-warning fw-bold" id="englishStars">0 ‚≠ê</small>
                        </div>

                        <button class="btn btn-danger w-100 fw-semibold btn-quiz" onclick="event.stopPropagation(); startQuiz('english');">
                            <i class="bi bi-play-fill me-2"></i>
                            <span data-en="Start Quiz" data-ar="ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±">Start Quiz</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Arabic -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm subject-card h-100 subject-card-arabic" onclick="startQuiz('arabic')" style="cursor: pointer;">
                    <div class="card-body text-center p-4 position-relative">
                        <div class="subject-badge subject-badge-warning">#4</div>
                        <div class="subject-icon-wrapper mb-3">
                            <div class="subject-icon-circle subject-icon-warning">
                                <i class="bi bi-journal-text"></i>
                            </div>
                        </div>
                        <h5 class="fw-bold mb-3" data-en="Arabic" data-ar="ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">Arabic</h5>
                        
                        <div class="score-display mb-3">
                            <div class="display-5 fw-bold text-warning mb-1" id="arabicScore">0/10</div>
                            <small class="text-muted" data-en="Best Score" data-ar="ÿ£ŸÅÿ∂ŸÑ ŸÜÿ™Ÿäÿ¨ÿ©">Best Score</small>
                        </div>
                        
                        <div class="mb-3">
                            <div class="progress progress-modern" style="height: 12px; border-radius: 10px; background-color: #e9ecef;">
                                <div class="progress-bar bg-warning progress-bar-striped progress-bar-animated" id="arabicProgress" role="progressbar" style="width: 0%; border-radius: 10px;"></div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                            <small class="text-muted">
                                <i class="bi bi-arrow-repeat me-1"></i>
                                <span data-en="Attempts:" data-ar="ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:">Attempts:</span>
                                <strong id="arabicAttempts">0</strong>
                            </small>
                            <small class="text-warning fw-bold" id="arabicStars">0 ‚≠ê</small>
                        </div>

                        <button class="btn btn-warning w-100 fw-semibold btn-quiz" onclick="event.stopPropagation(); startQuiz('arabic');">
                            <i class="bi bi-play-fill me-2"></i>
                            <span data-en="Start Quiz" data-ar="ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±">Start Quiz</span>
                        </button>
                    </div>
                </div>
            </div>

        </div>

        <!-- View Leaderboard Button -->
        <div class="row mt-5">
            <div class="col-12 text-center">
                <a href="leaderboard.html" class="btn btn-lg btn-primary px-5 py-3 leaderboard-btn">
                    <i class="bi bi-trophy-fill me-2"></i>
                    <span data-en="View Full Leaderboard" data-ar="ÿπÿ±ÿ∂ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ™ÿµÿØÿ±ŸäŸÜ ÿßŸÑŸÉÿßŸÖŸÑÿ©">View Full Leaderboard</span>
                    <i class="bi bi-arrow-right ms-2"></i>
                </a>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0 text-muted">
                <span data-en="¬© 2024 UAE Schools Competition. All rights reserved." data-ar="¬© 2024 ŸÖÿ≥ÿßÿ®ŸÇÿ© ÿßŸÑŸÖÿØÿßÿ±ÿ≥ ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©. ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.">
                    ¬© 2024 UAE Schools Competition. All rights reserved.
                </span>
            </p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- API Configuration (must load first) -->
    <script src="js/config.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="js/main.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
